imports:
    - { resource: "list.yml" }
    - { resource: "helper.yml" }
    - { resource: "exporter.yml" }
    - { resource: "security.yml" }
    - { resource: "form.yml" }
    - { resource: "log_representer.yml" }

services:

    _defaults:
        autowire: true
        autoconfigure: true

    NetBS\FichierBundle\Controller\:
        resource: '../../Controller'
        tags: ['controller.service_arguments']

    NetBS\FichierBundle\Service\FichierConfig:
        arguments:
            - "%netbs.fichier.config%"

    NetBS\FichierBundle\MassUpdater\AttributionMassUpdater:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
            - { name: netbs.mass_updater }

    NetBS\FichierBundle\MassUpdater\ObtentionDistinctionMassUpdater:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
            - { name: netbs.mass_updater }


    NetBS\FichierBundle\MassUpdater\MembreMassUpdater:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
            - { name: netbs.mass_updater }


    NetBS\FichierBundle\Service\ContactManager:
        public: true
#        arguments:
#            - "@doctrine.orm.entity_manager"
#            - "@netbs.fichier.config"

    NetBS\FichierBundle\Searcher\ActiveAttributionBinder:
        tags:
            - { name: netbs.searcher.binder }

#dynamic stuff
    NetBS\FichierBundle\Bridge\AttributionToMembreBridge:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
            - { name: netbs.bridge }

    NetBS\FichierBundle\Bridge\GroupeToAttribution:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
              - { name: netbs.bridge }

    NetBS\FichierBundle\Bridge\MembreToAdressable:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
              - { name: netbs.bridge }

    NetBS\FichierBundle\Bridge\FamilleToAdressable:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
              - { name: netbs.bridge }

#select2 providers
    NetBS\FichierBundle\Select2\MembreProvider:
        public: true
        tags:
            - { name: netbs.select2_provider }

    NetBS\FichierBundle\Select2\DistinctionProvider:
        tags:
            - { name: netbs.select2_provider }

    NetBS\FichierBundle\Select2\FonctionProvider:
        tags:
            - { name: netbs.select2_provider }

    NetBS\FichierBundle\Select2\GroupeProvider:
        tags:
            - { name: netbs.select2_provider }

    NetBS\FichierBundle\Select2\GroupeTypeProvider:
        tags:
            - { name: netbs.select2_provider }

    NetBS\FichierBundle\Select2\FamilleProvider:
        public: true
        tags:
            - { name: netbs.select2_provider }

    NetBS\FichierBundle\Select2\GroupeCategorieProvider:
        tags:
            - { name: netbs.select2_provider }

#listeners
    NetBS\FichierBundle\Listener\PreRenderLayoutListener:
#        arguments:
#            - "@security.token_storage"
#            - "@request_stack"
#            - "@doctrine.orm.entity_manager"
        tags:
            - { name: kernel.event_listener, event: netbs.block.pre_render_layout, method: preRender }

    NetBS\FichierBundle\Listener\MainMenuListener:
#        arguments:
#            - "@security.token_storage"
        tags:
            - { name: kernel.event_listener, event: netbs.menu.extend, method: onMenuConfigure, priority: 80 }

    NetBS\FichierBundle\Subscriber\DoctrineMapperSubscriber:
#        arguments:
#            - "@netbs.fichier.config"
#            - "@netbs.secure.config"
        tags:
            - { name: doctrine.event_subscriber }

    NetBS\FichierBundle\Subscriber\DoctrinePostLoadContactSubscriber:
#        arguments:
#            - "@netbs.fichier.config"
        tags:
            - { name: doctrine.event_subscriber }

    NetBS\FichierBundle\Loader\AdressableLoader:
        tags:
            - { name: netbs.loader }
